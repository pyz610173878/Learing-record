还好。

2200:04

今天给大家讲我们的第三个实践案例。

3300:07

也。

2200:08

就是web service，也就是如何实现一个在线的web服务。前面我们已经讲了两个实践案例。

3300:15

一个是在本地实现。

2200:18

一些自动化的工作，包括操作本地的文件，读写Excel的表格，然后自动的发邮件等等。

3300:24

第二。

2200:25

个例子我们开始迈入到web的巨大的网络世界，我们在第二个实践案例里面主要讲的是如何从 web里面去挖掘我们所需要的一些有价值的数据，比如说从网络的页面上去抓取我们要的数据进行清洗，然后存进数据库啊后面就可以用它了。

今天我们要讲的跟前面就完全不同，了啊到目前为止，我们这个课程所讲的所有的程序都是我们自己编写，然后在自己的电脑上去运行，只有我自己这一个用户，但是今天我们讲的就不一样了，我们要把自己的程序放到网络上去，放到web上去，这样全世界的人只要能访问互联网，他都可以访问到我们写的程序。

3301:04

所以今天。

2201:06

我们要讲的内容其实是未来大家要去学习的诸多内容的一个起点。

从今天我们介绍的实践案例开始，大家写的程序就不再局限于自己的电脑，而是放眼全世界的电脑，而且也不局限于自己一个人单用户的去运行它，而要考虑到有很多人一起使用你这个程序的时候会有什么问题，这个我们术语叫多用户并发就concurrency。

Currency并不是指说你有多少多少用户，是指你这个程序在某个时刻同时有多少用户在使用它。这个时候有些事情是你一个用户使用的时候根本就想象不到的。

3301:43

很可能。

2201:45

如果你没有做特殊的处理，很可能两个用户同时使用你的生意就崩了。

当然今天我们不可能讲很多的关于并发的原理如何去解决它，这些我们现在没法去讲得很清楚，但是我可以告诉大家，我们自己写的一个为单用户的设计的程序，他怎么我们通过一些特定的好用的工具，就可以变成一个允许多用户并发使用的 web的在线服务。

另外一个我们今天做的程序会有一些跟以前很不一样的点，就是用户交互界面也发生了变化，我们到目前为止做的所有的程序都是命令行的交互，虽然有一些我们写在居民在note里面比赛notebook里面，但是它本质上其实还是跟Python的解释器在类似于做命令行的交互，所命令行交互就是我输入一段文字计算机处理，然后吐出一些文字给我看，这个相对来讲是非常简单，而且非常直接的。

那么我们今天要介绍的例子里面，我们会进入到通过浏览器的机制，在一个浏览器里面，怎么让用户跟我们的程序进行交互，用户场景下，它的输入和输出方式命令行完全不一样了，那么我们以前在命令行的世界里面写的程序代码，哪些可以放到浏览器里面去用，哪些又不能放到浏览器里面去用，这个就是我们要去关注的东西，这是我们今天都会涉及到的一些有意思的话题。

4403:03

作为。

2203:04

单机应用来说非常简单，用户面对一台计算机，我输入给计算机计算机输出给我就完了。

我们现在为止用到的都是通过命令行的界面，有的人也试过用一些图形化的界面，但是本质差不多，你只要是要熟悉那些图形化界面的接口一些组件，我们现在做在线服务的话，你会发现多了一个层次，用户面对的还是一个设备，但这个设备的后面需要依赖于在云端的一个online service，就是一个在线服务，所以就不再像单机应用这样是只有两层用户和应用没了，在在线服务的领域里面，用户终端设备在线服务实际上三至少有三层，实际上在线服务里面还可以分好多好多层，所以通常叫多层服务体系，用户能用的终端设备就多了，去了有台式机，有西上就是笔记本电脑，有移动的手机，有viable，比如说手表眼镜等等这些东西都是终端设备，但它的本质是一样的，我们现在去做在线服务的时候跟十几年前也很不一样，十几年前很多在线服务它是直接吐一个网页出来，这个网页就是为计算机设计的，在别的地方都看不到看不清楚，它这个不适合于显示在手手机上或者其他的设备上。

但是今天整个web的应用架构已经转向一种叫前后端分离的架构，所以前后端分离就是 online service这一层，就对上面的这一朵云这一层，他不再关心我这些数据要被展现在什么样的设备上，你给我一个标准化的请求，我就图给你标准化的数据，这个数据通常就是我们以前看到过的Jason的数据格式，至于结算的数据格式要怎么呈现出来，呈现成啥样子，你具体的设备跟用户之间是怎么去交互，怎么处理用户的输入输出 online service就不管了，这叫前后端分离，就是王莱斯不再管它前端怎么展现了，前面怎么展现，全部在设备这一端处理。

在设备这一端可能是一个独立的APP，一个手机上的APP的桌面上的应用，也可能就是浏览器的一个页面，但是这个页面里面它会从online service这里取得Jason的数据，然后在这个页面上通过加QQ的脚本来实时的生成一个前面的页面展现给人看。

服务端就是online service c端不再去过多的参与前端怎么呈现的问题，分离是在移动时代来临之后迅速的通过大概5年左右的时间，主流就转向了以前那种直接在服务器端生成一个页面传到终端区的做法，就很少有人采用了，因为那种做法不能够兼容我们现在丰富的终端设备。

今天我们的例子里面会给大家看一下传统的那种方式是怎么做的，一个非常简单的小例子，然后会用一个复杂一点的例子来展现我们新的前后端分离的这种做法，大家可以去稍微体会一下这里面的差别。

在前面我们的预备课讲web的基础原理的时候，我们提到其实不管你客户端的东西是什么样的设备，是一个APP还是一个浏览器的页面，我们都把它抽象成叫做一个客户机一个client，然后我们提供服务的这一端就是做service服务的这一端，我们称之为叫server交互的逻辑，就是客户机不停的发request，然后服务器拿到之后做处理，然后给出一个response。

到今天为止，我们所有以前讲过的东西其实都是客户机这一端为主，视角，我如何去发起服务，我如何获得数据怎么处理。今天我们重点会去讲服务端怎么处理，我们就要考虑服务端它收到的request，它怎么去理解它，然后它生成的response怎么格式化，好然后传给科普级，这个问题其实挺多，内容可以讲，但我们今天会讲一个最简单的例子，大家可以领会里面最核心的一些精神，这个里面又涉及到我们前面讲的一个用户界面的问题，用户界面是在客户端的，服务端是不管的，客户金这一端其实用户界面可以有哪些主要的input和output，哪些输入和输出？

一个用户面对一个这个设备，无论它是什么设备手机也好，或者是电脑里面是一个独立的程序也好，或者是一个命令行的程序，或者是一个页面也好，其实本质是差不多的。

因为无非都是用户输入给他，然后他突出一些输出，在命令行界面里面，我们要实现这样的输入和输出，其实是最简单的，这是为什么我们从平常开始学，因为它简单很容易掌握它的输入输出就是两函数，负责输出的函数叫print，print可以打印任何东西，你给他任何东西他都把它变成一个字符串，然后在命令行里把它吐出来，这就是命令行的唯一的输出模式。

另一个函数就是 input，就是从命令行获取用户的输入。当你执行音库这个函数的时候，Python程序会停下来，等用户在命令行里键盘输入一些内容，键盘输入完了之后，回车输入的内容就会被读取到input函数的返回值，然后你可以再铺一个，其他东西我们以前写过的程序，这里有一段小小的例子，大家可能记得这是我们以前写交互式机器人的里面的一小段代码，如果去到map的界面输入输出就远远不是print和input，这两个简单的东西可以涵盖的， web界面的用户输入和输出会是什么样子？

 Web本质上支持的输入就是用户可以提供数据给服务端的办法，主要就是两个，一个是通过URL来传递数据给服务端，我们在预备课里面讲了URL的组成部分，医疗组成部分里面最开始部分是协议，然后接下来是host，也就是域名，指向的一个主机的域名，这两个部分是不算做是可以输入参数的地方，它只是指定地址和通讯的协议，那么这些东西后面 serve.com，斜杠后面的部分叫resource pass，就资源地址，这个资源地址会叫资源路径，它本身可以看作是给服务器的一个输入，我们后面看到这个东西是可编程的，是我们可以在我们写的服务里面去解释它的，然后问号后面这更加是正儿八经的参数，就是传给服务器的参数，这些东西都是可以用于往后端往服务端去传参数的办法，所以这是在web的世界里面用户可以去输入的一种方式。

程序员经常会做测试，就是在一个页面地址后面打个问号，然后输几个参数看结果是怎么样子，但是一般的用户很少会这么做，一般用户很少会用地址栏里面的这样的一些什么问号，什么等于什么来输入参数对吧？

用户一般会用下面这种方式，我们称之为叫web form，就是web表单，web表单是html所支持的一系列输入方式，比如说有文本输入框，有按钮还有比如说check box一个方块的 check box打勾的还有一个readbox，就是在一组选项里面可以任选一项的，还有什么日期输入的，10天输入的，等这些都是hml本身支持的一些标准的输入控件，这些输入控件组成的用户输入界面就叫web form，这是第二种在web世界里向后端去提交输入的办法，一般的做法是用户在这里面填写了一些内容，在这些输入控件里面填写或者选择了一些内容，然后点击提交，这些数据就会被传给后端的服务器。

这是第二种，这两种其实就是主要的方法了，其他的一些方法很少用到。

输出的方法主流的也是两种，第一种是直接吐，一个下边页面给你，当你输入上去了，服务端处理完毕，直接生成好一个html的文档，然后用我们在预备课里讲过的response那种格式把它封装起来，直接把页面吐回去，客户端接到之后直接浏览器就会显示出来，不需要客户端做额外的事情。

第二种也是我们现在主流的方式，服务端收到输入之后，突出来的是一个杰森的数据，节省的数据是一个字符串，就字符串是按照杰森的格式去书写的，格式跟我们Python里面的dictionary是很像的，然后这个客户端有可能是iOS里面的一个APP，是安卓里面的APP或者是一个h鲜妙的页面，他收到杰森的数据之后，他可以用程序去处理杰森的数据，然后用他设备上最合适的方式把它展现出来。

在iOS里面它就是那个APP它会用objective c或者Swift去读杰森的数据，然后显示为iOS的一些控件，安卓也类似html里面就是用J**aScript加速是一个专门的语言，也是我推荐大家接下来马上就去学的最重要的语言。

 Jasper的是处理杰森数据非常容易的一种语言，因为杰森本意就是J**aScript simple object location就加速自己的一种数据表示机制，加速收到杰森的数据之后，它就可以处理它，然后加速的是可以完整的操作浏览器里面的html的。它就可以生成html、修改html、删除ht tl，动态的调整html什么都能干，只要你在浏览器能看到的那些元素加速了都可以随意的去操作它，你掌握了之后你就可以加速来操作所有的输出，构造出输出的内容，所以输出的方式就这两种。Ok除了上面说这个以外，今天还有一个很特别的点会提到，到目前为止我们做的程序都是自己一个人，自己做了做自己事自己用，这种可以看作是一种个人爱好，但是如果你真的想开发一个正儿八经的软件的话，尤其是这种你要放到网上去给，不知道哪里的很多人用的软件的时候，你就不可避免的会碰到一些工程性问题。

所谓工程性问题就是第一。

5512:18

你可能会。

2212:19

有多人协作，有很多人一起来做这件事情怎么协调？第二，你的软件如果出了错，就不是自己抓耳挠腮，我这怎么出错，我再去研究一下，把它改正就好了，那个时候再大的问题都是你自己一个人的问题，现在不是了，你放到网上去了，所有人都在用，这个时候你软件出错就麻烦了，所以你必须测试。

而且你把一个自己本机运行的ok的程序放到网上去，本身就很有挑战。

总这个过程我们在工程里面叫做部署叫deployment，就是你写好一个软件，你要给别人用，这件事情的难度超出大部分人的想象，之前有个同学他做了一个小工具，可以可以帮他处理工作上的一些自动化的任务，然后他也打算提供给他的同事用，应该是同事。

他遇到难题了，我用pass写这个程序，在我这里就是叉叉点py一个文件，但是它怎么运行？我还得让他在自己的电脑上安装一套完整的Python环境吗？还要pip in store我所用到的那些库吗？这对于一个普通人来讲这多有难度。

我们大家想学编程的人付出很多努力，花很多时间问问题，然后我们回答最后才把自己的环境搞定，然后学到现在才知道怎么能够顺利的运行一个python的，原文件一般普通人他会花这么些时间吗？不同意的，当时那个同学想做的一个办法是用一个工具把拍摄里面用到的库代码打包成一个文件，然后把它封装成一个windows下面的exe文件，但这个机制其实有很多限制的，它不是经常不是所有时候都能够很好的运转的，他当时打包出来就运行就有问题，所以这个机制其实是不可靠的。

我当时给他一个建议，就是你可以考虑把你的功能封装成一个web service，封装成在线的一个服务，这样任何人用浏览器就可以访问了。

但是我这个解决了我把Python的运行环境交付和部署在用户那一端的困难，它不需要每个用户都自己装一套Python了，我只要在服务器这一段装一个Python，然后其他用户用浏览器访问就可以了，但是当我把这个程序放到服务器上去的时候，如何部署也是一个问题。

所以这是随意举例了一些，大家如果真的要去做严肃的软件开发的话，会遇到的一些工程性问题，我们今天会碰到其中会讲其中的两个问题，开发环境和交付部署。软件测试我们现在暂时没有讲也，是很专门的。

5514:25

一个领域。

2214:26

这个有幸大家可以自己去研究。

好，那么我们下面就准备开始演示下一部分，开始我们的具体的演示。

5514:37

写。

2214:39

一个在线服务从哪里开始没有头绪，但是其实任何流行的语言，他对这种非常常用的大家都在做的事情，其实都有非常漂亮的解决方案，Python也不例外，Python为了帮助我们去写这种在线服务，实际上 Python社区已经有了非常多的可用的这样的一些框架。

在Python的官网这么一篇文章，专门就介绍Python下面的web framework，在编程的世界里面，这个框架就是framework，一般它指的就是一些基础性的软件包，它针对特定的一个领域的基础性的软件包，就帮助你在这个领域去做事情的时候，你在它基础之上去做，你就不用去管底层很多细节，你就只用关注于你自己的一些具体的业务，具体的一些逻辑就可以了，这些数月末可以大量的帮我们节省时间，提升我们软件的质量。

比如说WiFi是专门用来做web在线开发的，还有以前我们跟大家讲 AI的时候，我们提过 test flow，这就是一个做某些蓝领的一个framework，就把底层的全帮你封好了，所以这样的framework很重要。 Python有非常多的水果去看，估计有上百种，你也可以看一看最近比较流行的一些，比如说jungle、弗拉斯特、NATO，这都是相对比较流行的。但是你光看流行其实。并不是一个最好的学习参考，因为你在学习你现在并不是在工程上应用，可能排在前面，在工程上应用有很多好处，但是未必是你学习最好的。

所以光看流行度学习其实不一定靠谱。我今天想给大家推荐的一个学习的这个VIP框架恰好在这个最流行的榜单里就没有叫VIP叫web点py这是一个很时间也挺长的框架，它非常的简单，非常的清晰，非常适合用来入门，所以今天我们会用它来讲，在其他这些流行框架里，我个人比较喜欢的是plus，有兴趣大家可以未来去研究一下，很有意思。

 Ok我们接下来就用 VIP，首先我们需要去创建一个目录，这个目录下面我们准备用来放我们今天的整个演示的项目，比如我们都叫 learn rap，然后我们进去，这里面空荡荡的，好，我们前面提到有开发环境的问题对吧？所以这里我们就要讲一讲就是开发环境怎么去统一。 Python支持一个很重要的机制叫watching environment，就是虚拟环境。

所谓虚拟环境就是它能够建立一个特殊的环境，这个环境跟所有包括你系统里装的Python系统里装的、Python的各种各样的第三方包都隔离开，它变成一个独立的封闭的环境，这个环境很可能你就只为某个特定的项目使用，比如说我们现在伦为VIP这个项目，我们想让它具有一个独立的虚拟环境，跟我们在系统里安装的以及我们平常学习用的环境都不一样，它就是独立的，为什么？

因为这样的话就不会干扰到我们原来那些环境，我们会安装一些特定的第三方软件包，它的版本，它的软件包具体包括哪些软件跟我们过去学习都不一样，我们学习肯定装了很多各种各样的软件包，我们在这个项目里希望一个干净的开始，彼此互相都不影响，这样的一个好处就是如果我们跟别人合作，我们可以就聚焦在小的独立的环境里，不用去管我本机上装的各种各样乱七八糟的东西，更重要的是我们是要把我们写的服务部署到服务器上去的，我们不敢在服务器上装乱七八糟的那些包，我们在附像装的一定是为了运行我们这个项目所必须的那些包，所有这些原因放在一起，我们需要一个虚拟环境，它是三以后的版本，都直接内置了对虚拟环境的支持，使用起来也非常简单，就依据命令叫Python，然后杠MV就这么一行命令，这样命令什么意思？

它是用Python去解释器去运行一个叫做venv的这样的一个魔9，一个模块，这个模块它是内置在Python里面所以，我们可以直接这么用不用额外装任何东西。

然后后面 venv这个参数就是指虚拟环境建立在当前目录下面的一个叫venv的一个子目录里面，这是约定俗成的，你也可以建在别的字幕，比如说你后面你可以用别的就叫v或者叫we in什么 environment都可以，但是它就叫做venv这样的一个子目录，这是约定俗成的，你如果就遵循约定俗成的规则的话有很多好处，比如说windows dot，它会自动的使用这个里面的虚拟环境，所以我们通常就建议大家就用这个名字，好，当你运行这个东西的时候，系统就会把当前系统里的Python的版本就是你缺省使用的那个Python的版本比如我这里这个Python，它是在这个地方的，然后这个Python它的版本3.7.4会把这个版本的Python原样的在当前目录下建立一个叫vnv的一个子目录。

Ok我们可以看看子母乳里有啥，子母里面有很多东西，它实际上是包含了一个bn，一个可执行的脚本，一堆把我们当前系统里缺省的Python的环境复制了一份过来，然后它也包含了一组Python的基础的库，但是不包含任何额外的第三方软件库，全部都帮你复制过来，建立了一个独立的新环境。

然后这个时候你运行下面的一个命令一个点，然后venv杠别人杠activate，注意最开始是一个点，然后一个空格，然后后面是这个虚拟环境的叫激活脚本，激活脚本放在vnvbinatv下面，这句话它的实际的意思是它实际上是运行了这么一个命令，实际上运行这么一个命令，我现在介绍这个是麦我是在MAC下面操作的， Linux也一样，如果是windows下面会稍微有些区别，大家可以去查 windows、Python、venv你就知道的 window下会怎么去运作，然后 sauce这个东西可以简写，还可以写成一个点，但是还是要一个空格，然后v因为好你运行这个之后，当前的命令行就会被激活，为我们新建的虚拟环境在命令行提示付钱会出现VV这样的一个简单东西，可能你的命令行配置跟我会不一样，会看上去一些区别，但是你只要知情了它就激活了，这个时候你再去看当前目录下的Python的话，你会发现它就指向了我们刚刚创建的venv vnnv的bin下面的Python，然后你如果用PHP类似的话，你会发现它非常的干净，几乎什么都没有。

Ok我个人的习惯，因为从系统环境拿过来的 pip的包会比较老，所以通常我会在这里更新一下两这两个基础包是任何虚拟环境都会带的。

6621:17

ok所以。

2221:21

你现在建立好了一个虚拟环境，虚拟环境里面你可以去装任何的用VIP因素我去装任何的第三方软件包，但是不会影响到外面的世界，就局限在去年环境里面了。

Ok为了使用VI p我们至少需要安装一下。

6621:37

 web点皮款。

2221:39

这就是我们用的 web框架，他会带一些第三方会带一些依赖的包。

6621:46

会但是也。

2221:47

不多很简单， VIP真的是一个非常轻量级的库，好，这些一切准备就绪了，我们就可以kod的点来看。

放大一点，大家看得清楚一点。

好，在这个目录下，我们创建一个新的比如叫server点py好，这个就是我们的主程序了，我们主要的程序就是它了。

然后我们写一个最简单的最 hello world import web VIP的膜9很简单就叫。

7722:37

y然后。

2222:40

有一个很重要的这个变量，我们要定义的叫ur ls，它是一个突破，我们第一个版本里面它就只有两个数两个值。 Ur ls pupil它里面是一对一对的值。

7723:03

它。

2223:03

可以有很多对，但是它连在一起都。

7723:06

排成一个突破。

2223:06

每一队代表了一个URL的片段和它对应的处理 URL的方法。

我们现在指定了我们接下来的我们实际上是在编写一个网站了，我们接下来网站的根目录，就这个网站的根目录，当你访问这个根目录的时候，具体的处理将由一个叫index的类来处理，然后下面我们来实现 index的类，index里面可以包含若干方法，这些方法对应到httv协议里边的那些webs，我们在预备课里面讲了，HTTP我们发起一个request，发起一个请求的时候，我们要告诉服务器我们这个请求是个什么动作，可以支持get，还有post若干，我们今天会涉及到get和post两个，还有其他一些这些动作， get是最常见的，所以我们可以定义一个叫get的方法， get方法这个名字是必须是一模一样的，就是大写的 gat，然后self然后很简单，我们return一个东西， return的东西就是会被打包在 response里返回的东西，我们现在实际上是在写一个APP的server，HP的一个服务器，我们返回啥？

返回一段html的代码手写，我们现在手写的，我们现在就定义了。

第一我们在URL s里面定义了，我们现在做的网站它的根目录，如果用户房屋根目录我们就要去调用index class来处理，而应该是class里面我们定义了若干方法，如果你支持get这个动作，这是sap定义的一个一个动作，如果你支持 get动作的话，这是最基本的，就是访问这个网站，访问网页的时候会发给服务器的行为，我就return一个这样的html的代码给他。

Ok然后下面是8股，这些8股的目的是让VIP可以帮我们做事。好，就这么简单的代码，这就是我们的hello word。计算代码什么意思？实际上秘密的核心就是这个东西对吧？我们从VIP引入的 Web，然后web的education会创建一个新的应用，然后应用乱起来，就是一个sap的 SP的server接受到这个客户端的请求的时候，当这个请求是对根目录的访问的时候，就调用index class来处理，如果访问是一个get的话就返回这个东西，如果其他的话就不处理，就不响应不支持。

Ok好，我们现在可以尝试来运行一下，就直接Python，然后 so好他会告诉你我已经启动了，然后我现在是在这么一个地址就可以访问到我们创建的服务器了，我的系统里面是有一个代理服务的，所以的话0.0.0.0这个地址他就访问不到，那么你改成local host就可以了。

打oppos对应的就是127.0.0.1，我们可以看到从127.0.0.1有一个HTTP1.1版本的get，然后这个根目录的这样的一个请求202ok，然后这个是浏览器会自动发的一个请求，就是去看你这个网站的 iPhone icon会显示在这里，或者显示在你收藏家的目录录里面，好，我们现在访问这个地址实际上就是根目录的地址，对吧？

他返回了一个hello world，如果我们去打开我们之前曾经多次使用过的，给完了托吐尔斯的话，你会发现它核心的就是这一局 HH，就是head第一集的head，就是最大的标题样式，然后hello world，这就是我们在这个程序里返回的这个东西，就是这句话的效果。

你可能会觉得就是说我们没有写前面这些东西，我们上在预备课里讲过html，完整的结构是hml是最外层的，然后下面有head，标签害的子标签body，然后8个里面才是内容，这个东西是浏览器自动帮我们补进去的，因为浏览器会接到服务端返回的东西之后，会把它建立成一个Tom，他建立dorm的时候会补上那些规范所要求的部分，所以这样我们一个最简单的服务HP服务就已经ok了，就非常简单，如果我们停下来的话，把这个服务关掉的话，这里我们再访问就没有了，因为这个赛季已经停了，我们这个服务器停了，有的人机器上可能80 80端口，这是缺省的，这是VIP框架，缺省的一个服务端口，有的人机器上可能被占用了，占用的话没关系，你就在后面写上你想用哪个端口来启动，你变成这样的了。

如果这样的话你去访问这个仍然不行，因为现在端口换了，端口换成77了，所以之前在预备课里我们讲过 URL里面的端口很重要，因为同一个服务器上可以有很多个程序，每个程序在某个特定端口对外提供服务，这些程序可以同时对外提供服务，一台机器可以有很多对外服务，这些对外服务只要它有各自独立的端口就没问题，你不能两个服务都抢一个端口，这不行，但是不同的端口是可以并存的，所以你必须指定你要访问的服务在哪个端口上，你后面才能正确的访问到他，所以端口相当于是同一个门牌号码下面的不同楼层或者不**间或者不同柜台，这个是这么一个概念。

好，我们现在这个东西能做的事情就很少了，我总不能让别人访问我，服务每次都只返回非常简单的一句话，这样的网站也没什么用对吧？为了能够返回更复杂的东西，那就需要有更进一步的一些机制，这些VIP都支持的挺好没问题，所以我们来看看下面一些东西，第一个我们来看一下所谓的 Template的意思是我可以把要返回的内容先写在一个独立的模板文件里面，然后在我们的具体的服务的 Python的源代码里面，只要引用那个模板，然后展现它就可以了，这个模板长得很像html，知道怎么做，我们首先在项目里面我们建一个子目录叫10place，这个名字随便你，但是你要使用这个名字，你要在程序里面你要指定的。

然后在empty下面我们创建一个新的模板文件叫index点html ok，这个现状里面我们就写先兆代码就好了，我们可以写稍微复杂一点。

我们暂时先不写这些太麻烦了。

好，我们就写了这么一个非常简单的模板，这个模板我们后面会越来越复杂的，现在先做一个特别简单的，但是理论上讲里面你已经可以写完整的 html的东西了，这里面可以写一个完整的html的文档都没问题，然后这边我们就不用直接去写这种东西了，我们可以直接来使用刚才说的那个模板怎么做，我们可以在这里初始化一个变量叫render，等于web点template，点render，然后这后面要写你放time place的目录对于我们来说在这里后面有一个斜线，ok然后有了这个东西之后的话，这个VIP就可以用这个对象来帮我们做具体的页面的渲染，我们就不用自己去写这个页面内容在这里了，我们直接在里return一个render，Dean index。

他怎么知道render有一个叫index的这样的方法，其实这个方法是动态生成的，这个方法就看你在temple下面有没有叫index点html的文件，所以这里这个函数的名字这个方法的名字跟你这个模板的文件名字是一致的，然后这个模板必须放在你初始化的里面，好，我们有了这些修改，这个东西我们是可以搁在这里不管它的，当你这个程序发生变化的时候，它自动会更新的。

Ok我们开多一个新的这样两个窗口，上面是我们运行服务器的，这里大家注意，我们现在其实是用一台电脑同时做server和client，server就是我们在这里跑的 Python的程序，而client就是我们的浏览器，等一下我们会介绍怎么把这个东西放到服务端去，那个时候你就可以通过你本地浏览去访问远端的服务器上的程序，但是眼前我们是在本机做server和看同时做server看来进行这样的测试，这也是外开发常规的办法，在很长一段时间里面MAC的电脑很有优势，就在于它可以在本地跑服务端的程序，也可以在本地跑**的图形化的界面，当然Linux也可以这样，但是04在某些环节它会没那么易用。

Windows的问题就是它的服务端跑起来会很麻烦，现在好很多了，现在windows有一个机制叫做WC l叫做windows sub system of Linux，就是它可以在windows下面跑一个Linux，实际上windows也能做到我刚才说的那样的事情了，但是有兴趣大家自己去试，我现在是在MAC下面去做这个事情ok。

然后我们现在刷新一下页面，你就会发现最新的改动已经生效了，现在这个页面的内容就包含了 h1的标签下面的welcome。

还有下面一句hello word，其中hello是用 emphasize em这个标签括起来，所以是斜体的，这些就是我们刚才修改的这些内容就已经生效了。好，这些都只是静态展现，就是你请求一个页面我就给你一个静态页面，啥花样也没有，我们为了做真正的程序，不可避免的会要有输入和输出。

Ok输入怎么做？我们有几种方法，我们刚才在这个开始的介绍中间讲了，一个方法是在URL里面用参数，第二方法是用web form，我们现在这一部分先跟大家介绍用URL里面的参数，在下一个部分再给大家讲这个用web form的方式。

好怎么用 URL的参数，如果要带参数的话，首先我模这个模板里面就需要有参数，这个参数比如说我现在hello word，如果我有一个参数是我这个人的名字的话，我想把它改成叫hello你的名字这是很常见的，那么这个变量怎么体现出来？

 Vip的模板它规定就是必须要在这个模板文件的最开始要声明你这个模板里面使用到的变量，圣灵的语法是一个 dollar，然后df with然后括号里面你所有的用到的变量有几个，就写几个用逗号隔开，我们现在只有一个叫name，然后在模板里面我们可以写这么一段代码，这个也是VIP的叫if name。如果这个name它是不是空的，我们就显示什么？就显示hello name。

Ok。

8835:05

 Dollar else。

2235:10

如果它是空的，这里就照原样显示word就好了。如果你采用不同的 web framework写模板的方式以及模板和 server程序之间传递变量的方式都会有些区别，这个需要你具体去学那些传播才能够掌握。我今天讲的是 Vip的方法，你可以体会一下，其实药要点差不多的，无非都是你要建立这个模板跟你的程序之间的一个桥梁，怎么能够把这个参数来回传递。

 Ok那模板里面我们已经定义了一个变量叫name，然后针对这个name的值，我这个模板里面生成不同的，html，当 name有的时候生成这么一句，当没有的生成这么一句，而且随着name的不同生成这一句的内容也会不同，因为这里会被 name的值替代掉，这就是模板的价值，就是模板可以动态的生成一个html，它是根据你的后台程序运行结果来决定生成一个什么样的html。

Ok sir点，py这边我们也要做相应的修改，我们先做一个超级简单的版本，我们就直接在这里指定 name等于然后在人的方法里面，你要把这个参数要传进去，所以这里写一个name。

Ok第一步的修改其实就很简单，这样就可以了，这样就可以了，我们现在来回车你这时候就发现这个参数传进去了，没有如果你修改这个变量的名字，刷新这边也会相应的变化，说明模板确实发生效果了，它根据你在这个程序里所收到的一个变量的值，而产生了不同的html的反馈，这个也没什么用对吧？我希望这个name不要在程序里指定，我希望用户来输入它怎么做，也是 VIP提供的方法。

贝塔等于web点input，然后name等于那这。句话的意思是 web是VIP的主的module了，然后它有一个音库的方法，这个音库的方法跟我们在命令行用音库的方法有点像，它是取用户的输入，然后把输入赋给一个叫data的这样的一个对象，这对象里面有若干属性，每个属性对应着一个输入。

南北南的意思是如果这个web input里面没有name，这个名字的输入值的话，贝塔点name就给他一个角， ok，贝塔对象里面有哪些属性是动态的，是要看客户端浏览器提供给服务器了哪些输入的参数，如果没有name的参数的话，data里就没有name这个属性，但是我们又需要在下面引用data点name，所以用name点nine来指定，贝塔必须得有一个叫name的属性，如果我要给input没有返回这样的一个属性的话，那就给贝塔点米更烂，这个逻辑大家得搞清楚，那什么叫web点input，实际上就是sap的request里面它是包含一些参数的，这些参数是放在 HTTP的快速的数据包里面的，而数据包里面有一系列的等于value，这样的name的value怎么来的呢？

其实就是我们在这里跟目录，然后用问号name等于比如说就是这么写的，如果我们写了这么一个带参数的这样的一个URL的话，我回车它就会 web点input返回的东西里面就包含了点name，我们可以写很复杂，它都会被读出来，这就是web点input的效果，它可以把用户在 URL里面用问号这种方式写的参数就统统的读出来，然后变成贝塔的下面的属性。

如果用户在这里没有写name的话，这个里面缺省就没有，但是我因为写了那么一难，所以他即使用户没写，但是我不写这一句。

那么他就会视为 name等于n然后返回hello，这样我就可以用用户的输入来操纵我产生的html的内容，这样就体现了输入和输出，当然你也可以处理了，你可以把这个name你可以加一点东西，比如说你把它写成这都可以都没问题啊，这都是你可以做的事情。

这是我们可以采用 URL里面的问号带问号的参数的方式往服务器端传递一些参数。

还有另外一种方法跟这个类似，也是在URL里面去传递，但是它不是用问号，然后 name the value这样的方式传参数，它是直接在URL里面写，比如说我就写成这样，其实也是可以的，这就是用resource pass，我们讲URL的几个部分大家可以去复习，里面的resource pass那个部分本身也可以看作是输入参数，但是如果这么做的话就需要修改。

我们URL这里的这个映射这个东西叫road，map就是叫路由映射，就是我把不同的URL请求的 resource pass，把它映射到不同的处理class上去。这是urs这个变量这个QQ所完成的任务，它是完成了一个映射，把resource pass映射到对应的处理的class。如果我现在有这么一个东西想处理的话，我映射的写法就跟刚才会不太一样，他得这么写，一个比较粗糙的写法是这样子的。

不仅跟目录的访问，映射到，index跟目录以及它后面带任何东西都映射到index，而且根目录后面的这一部分会被这是一个政策表达式的补货的 group，会被捕获下来成为一个参数，而这个参数会被当做一个输入参数送给get方法。

也就是如果我写了一个 URL，它是根目录下面有一串东西的话，那么这串东西会被放到这个会被传给get的这个方法里面，叫做name，变量输入参数变叫name，好，如果是这么写的话，那么这里就简单了，直接render index name就可以了。

我们看到这个跟刚才的效果是一样的，只是参数传进来的方式会有区别，前面这种方式不需要改 resource pass，就是 rote路由不需要改，路由的映射不需要改，但是如果你是用这种直接把resource pass把它送进来当参数的话，他就必须改路由，而且送进来的东西要放在 get的输入参数里面，但这种方法其实并不是太好。

因为这样的话导致一个问题，就是你在这个根目录下面后面写任何东西，它都会被映射给应该是一个class来处理，有的时候我们会写一些别的东西，我们会写很多个不同东西比如说根目录给ind处理然后根目录下面有一个什 service什么的，我们要给另外一个类处理，都会被这个东西捕获，甚至有一些我们静态文件，比如说一些图片，一些什么加sq的文件了，也会被东西干扰到，所以这种写法不是特别好，所以我们还是恢复到刚才那种写法，但是这里告诉大家就是用resource pass和用参数问号后面的参数来往里面传参数都是可以的，这个就不存在了，因为因为这个路径我们还没有在这个urs里面定义，我们只定义了一个路径，就是跟目录，我们只定义了一一，但这一个的后面你可以带参数， name等于参数前面必须有一个问号，这样就恢复正常。

好，这一部分的最简单的hello world的介绍就到这里，下一部分我们跟大家讲怎么去deploy，怎么去把它放到服务器上去。

好，我们在讲我们的服务部署之前，我们前面提到过，当你把你本机的一个程序把它部署到网上去，给成千上万的人在web上使用的时候，要注意很多问题，部署不简单，我们这里很难展开谈这个话题，因为这个是涉及到很多架构上面的问题，需要大家有更多的背景知识和经验之后才比较容易理解，但是有几个点我觉得是大家比较容易现在就能够理解的，我们会在这里提一下。

我们刚才看到了在本地的例子，我们转了一个Python点sir， Python server点py serve点py是我们通过 VIP提供的功能，用非常简洁的代码就能写出来的一个APP的时候，所以Python server点py就乱了一个sap的server，然后用户通过浏览器去访问 server的地址的时候，就得到了server的返回，我们已经试过了，我们可以去控制返回我们通过计算来操作如何返回数据，返回什么样的数据。

这种情况下，我们在程序的代码里面写的东西，它本质上实际上是什么？是处理一个用户请求的逻辑，就当一个用户请求来的时候，我返回重新给他，这中间我们在现在的版本里只是非常简单的写了一些返回一个模板里面有一些简单的if else判断，但是实际的这个项目里面很可能逻辑非常复杂，处理一个请求要花相当长的时间，这个时候如果有好几个人同时来请求的话，会发生什么事情？

在缺省情况下，Python的运行，每个Python解释器它的运行是一行一行运行的，它在任何时候只能处理一行代码，这行处理完了处理下一行，它是一行一行这样顺序执行下去的，如果有两个请求同时来了，这个解释器只能把上一个请求处理完才能处理下一个，这样就带来很大的并发问题，就是很多用户预期访问的话就会等待得非常严重。

我们知道在web年代在互联网时代，人类是非常的没有耐心的，我点击了一个网站，如果不能立刻出来，我已经很不爽了，然后我最多能等10秒，10秒之后我肯定关掉它了，很多人湿了动不了你不信可以自己去试。

所以这个时候怎么办？如果我们把我们 Serve点py放到服务器上去，然后执行Python点py确实可以产生一个 sap server，然后也有用户可以去访问他，但实际上并不好用。这个时候怎么办？我必须要解决一系列的在网上提供服务的问题，这里面我可以略微的举其中的几个问题。

第一个问题是你要支持htpts我们现在访问网站有的网站是HTTP，冒号协议是HP，有的是htps，这个s代表sslssl是一个加密规范，它在原有的HTTP协议的基础之上套了一层加密层，这是一个端到端的加密，就是我请求方会加密再发送出来，然后到服务器这端解密，然后再进行处理，然后服务端生成的结果先加密再发送，然后客户端接到之后解密再展示出来，它是一个完全叠加在HTTP之上的加密的层，但处理这个层相当复杂，它有一系列安全问题，然后层之上还有很多扩展，这些问题都需要专门的技术专门的软件去处理， Vip显然不包含这些东西。

你难道自己去写吗？其实这是很不划算的，你可以把它交给更专业的服务器去做这件事情。

第二个与之类似的是我们经常需要使用到一些静态文件，我们的sole点py这个文件是动态的，是执行Python然后算出来我要返回什么东西，但有些东西它是不需要算的，比如说我这个页面上有这个图片，或者我这个页面用到一个样式表，一个css，什么是样式表？

我们下面后面会稍微介绍一下，这些文件都是写好之后不会动的，它就所谓是静态文件，用户只需要访问这个文件把它下载回来，然后浏览器会用它做些事儿，跟你这个思路点外一点关系都没有，他不属于你这个思路点皮外洞Tei计算的东西，这东西叫静态文件，静态文件的存取，Tudor的访问，而且提供给别人下载的静态文件文件文件是比较大的，比如图片，然后样式表还有加速度，它都是比较大的一些文件。

这些文件它的host它的很多人下载时候，你怎么优化它的流量，优化它的存储，这些都是问题，这些问题也不应该由我们这样的一个色外点py来处理，它应该有专门的服务来处理。

好，还有如果你搜脸皮外crash了挂掉了怎么办？每次 Python运行拍摄所有眼皮外，然后有人来访问，人家访问突然有某种原因他挂了， Python这个程序出错退出了，然后后面所有的访问就都没法访问了，这时候怎么办？需要去重新运行，Python、solar点、py谁来重新运行呢？线这个网站挂了你就去重新运行一下了，如果你是一个真实世界的服务，可能早就破产早就垮台了，所以它需要有一个自动的recovery，当出现问题的时候能够最快的自动的能够恢复，这个也是需要有专门的是人去做专门的程序去做的，我们思考点py自己是做不了的，还有就是最重要的，我们称之为叫scalability，就是scale up，当用户增多的时候，你可以使用更多的资源来回应这些用户，比如有人就想到这个问题了，说我执行一个Python所有的p外，我可以响应一个用户的请求，这个用户完了放响响应下一个，如果同时有5个人来，我就3起5个程序，我就把Python so点py运行5次，然后这5个程序分别就去回应这5个并行来访问的这些用户不就好了吗？

这是一种处理并发的问题的典型思路，也是很多的服务就是这么干的，但是这件事情本身并不容易做，比如说你要管理你到底起了多少个Python解释器，然后某个排斥解释器处理某一个特定的用户处理完了之后，他就处理下一个怎么去给他们做排队，给他们做任务的调度，所有这些事情都是我们在做scale up在做水平扩展的时候是必须要考虑的这些事情，我们4个点py也不想管，或者简单的说我们写4块钱py我们就想解决一个问题，就是当单个请求来了，我应该怎么去计算，怎么去处理，怎么去回应它？当有很多请求来的时候，我不想管这事，如果有一个别人能帮我做这件事情，每一个请求来我就起一个Python来解决它，用完了可以复用空闲的牌子的解释器，然后我这样可能可以用10个牌子解释器，就处理100个升级没问题。

所有这些上面说的这是几个典型的例子，大家可能有一些现在马上有些可能会有点困难，没关系，你以后慢慢的会理解越来越多。

总而言之意思就是说我们写了一个色弱点，题外很多问题是没解决的，而这些问题其实不需要我们去解决，有现成的办法，这个办法就是这么一个部署的架构，这个架构已经发展了很多年，我这里举个例子是Python像wsj这是Python专门的一个东西，但其实各种其他的语言其实差不多这么干的。

首先用户的请求来了，我先用一个web我来接受这些请求， web我可以处理什么？可以处理https的问题。Web server流行的比如阿帕奇x对sap协议对HTTP加tls加SSL这样的加密协议，他都可以很顺畅的处理掉，处理完了之后，他还能顺便把静态文件的host，把静态文件的存取访问下载等等这些事情都帮你处理掉。

也就是说你可以把静态文件全部放在web，网上用户访问这些静态文件就跟在普通的web上下载一个文件是类似的，就放在这个web上就可以了，然后有另外一个专门的工具就是一个wci的所有，这个我们称之为是一个中间件或者叫一个application，so一个应用服务器，他跟webservice之间做一个配合，当web server拿到某些特定请求的时候，他已经在web store这一层把什么SSL加密等等这些都处理完了，然后就是一个干净的stv，请求了然后我可以配置这类，请求让这个webs我去找 Wsgl server要一个回复，这个技术叫反向代理，就是一个服务接到一个请求了，他反过来去问另外一个服务要结果，简单说这个意思。

我们 wsh wsgi这个server干什么？他就负责管理我们的SUV点py需要的时候需要是多运行一个，或者你指定一共运行5这5个可以轮番的谁空闲了就处理下1个请求，他会去帮你做排队做任务的分配等等这样的一些事情。然后如果某一个 Python节系挂了，它会自动把它重新启动，然后它会帮你解决所有点py和map solar之间的通信的问题。

所以现在我们要去部署一个Python的 web的服务的话，其实通常都会采用这样的一个架构，当然了web service有很多也不算很多，流行大概一只手可以数完阿帕奇，安吉斯恩这个是市场占有量最大的，还有light HDP还有一些其他的专用的一些比如J**a的思路是怎么样子，然后wsci的思路就多一些， Python有很多这方面的不同的项目，提供 wsci的 server，然后你的server点py必须跟WC加server是兼容的， VIP当然是兼容的，怎么兼容下面有一个专门的代码要去做的。

好，我们今天的演示 web server选取的是恩杰克斯，就现在使用最广泛的也是最成熟的性能也非常好的一个用纯c写的一个web server，他对sap和hps的协议支持非常的好，它也支持wsci的代理反向代理的模式。

而wcso我们选用的是一个叫gu Nicole， unicorn就是独角兽，是原来Ruby语言下面的一个应用服务器是用Ruby写的，然后Python的社区就参照了这个unico的这个思路重新实现了，用Python重新实现了一个类似的这样一个服务，并且把它实现成一个wsgi的server了，这个东西就叫做记忆用力孔，类似于记忆用力孔的这样东西，还有好几个选择，大家可以自己去搜索。

但是金庸类矿是用的比较多的，它配置也比较简单，所以我们今天会展示这两个组合，然后后面我们用VIP写的 server点py了。

好，下面我们来具体的演示一下，我们要把我们自己的程序把它放到服务端去，有几个条件，第一个你得有一台服务器，这个选项很多，国内有什么阿里云等等，国外的有什么低级头神低头审，还有什么water等等都可以随你便。我这里展示的是我在国外的一台服务器是一个配置很小的服务器，但是跑我们这个程序应该完全没问题，然后然后。

9953:42

大家好。好。

2253:53

我们现在来正式开始做这个页面里的我们要的这张表格的抓取。

9953:59

大家好配置是很小的服务器。

2254:01

但是跑我们这个程序应该完全没问题，然后你要去部署你这个服务，你要把你的文件上传到服务器里去，你可以用FTP来上传，但是最简单的办法是用p Top，你可以在你的当前你现在已经有一个目录了，这个目录下面就是你这个项目完整的代码，然后你可以 Get，然后initial，ok，然后我习惯上会在这个项目里面放一个文件点，git more，这是git的一个特殊的配置文件，凡是放在这个文件里的这些目录和文件就不会被jit管理。

等于你告诉他说我这个文件是会存在，有可能存在于我当前目录下的，但是我不需要给他来管我，我也不打算把它放到别的计计算机上去。

作为一个Python的这个项目，它有这么一些目录通常是不需要管的，比如说我去买我们刚才创建的虚拟环境的目录是不需要的，因为不同的设备上不同的操系统下面， venv的里面的内容应该可能是不同的，你比如说如果我们现在是在一个MAC电脑上做开发，然后我部署是要处在一个临时电脑上面，那么我到时候在Linux上是要重新去创建虚拟环境的，它里面运行的那些第三方软件包如果里面有本地化的代码，那是要重新编译的，就是要专门有x版本才行。

还有这两个是凯森的编译出来的字解码，这两个也一般不需要还有一些常用的本地化的东西，比如有一些程序你会需要放一些本地配置文件，比如用户数据库的用户名和密码这些东西，这些东西你当然不希望把它分发的，全世界都是这个问题。

大概世界上每天都有人会犯这个错误，就是有程序员不当心把包含了用户名密码的文件传到beta上去了，这种事情我待过的每家公司都出现过，然后一旦出现这就是惊天动地的事故，这个人一般来讲最好的情况也是要严重警告，严重的情况就直接开除了，因为损失非常大。

一旦这个密码泄露了，且不说有没有被人利用，就算没被人利用，立刻整个公司的所有的环境都批改密码，一个大的公司要改一次关店的服务密码的话，那个是非常麻烦的一件事情，所以有一些这种东西你可以把它放在像logo这样的目录下面，这样它就不会被 get管理，你就手工去管理这些敏感的数据，还有其他还有比如说点vs扣的，这是vs扣的本地配置信息，这当然也不需要放到服务器上去，所以这些都可以放到可以就得到里面去。

好这个文件创建好之后，你然后你也创建了一个did的版本库，然后你可以get把。

9956:35

所有。

2256:36

这些加进去，一共就三个文件，现在很少，然后替他们好，你这样的话本地就已经有一个bit的report three了，然后你就去你的get up里面。

9956:57

你。

2257:00

去创建一个新的 report水，创建一个远端的report three。

9957:05

比如说。

2257:09

实际上我前两天测试的时候，我已经创建了一个 anyway我们可以再创建一个新的。

9957:16

叫demo。

2257:19

如果你不想被别人看到的话，你可以把它设成private，然后其他什么都不要，有什么这些都不需要完全空的。

101057:26

好。

2257:29

然后按照他的指示，把这个新创建的跟up上这个demo的report，水跟你这个本地的repouse把它关联起来，就用这个命令就是指定在本地的这b上面，指定它的远端的origin，指定到这里。

101057:42

然后铺上去 okay。

2257:54

就可以了，这样你的代码就已经在get up上有了，然后现在你就要去登录到你的云服务上面去，登录到你的服务器上去，比如我这个服务器，我已经写这个脚本，他们都是这个服务器用的，好我现在登录到我远端的服务器上，现在我就在远端服务器上，这是在美国的一台服务器，然后就很简单了，你就可以把。

刚刚的 report水把它克隆到服务器上，现在很少有服务器不预装。

9958:36

因为。

2258:39

我这是一个private的，所以它需要输入用户名密码。

这样我的代码就已经在服务器上了。

大家可以注意到我本地的那些乱七八糟的目录这些都没有，因为我已经在一诺里面把它去掉了，这里面就只有所有点PPI和time please。

101058:55

Ok好。

2258:56

当已经准备好之后的话，以后你本地这个代码发生变化，你只要在本地修改了这个程序，你就在本地commit一下，然后再push复习到get up上，然后你再登录你的服务器，在服务器上用git破就可以更新服务器上的代码，所以这样的话你就可以保证两边的代码是一致的，当然也有别的办法来做这样的部署，比如用什么远端的think或者是APP，但是我个人觉得小的项目 kitty最简单的办法， ok好下面就是我们要在服务器端去重建我本地的环境。

101059:34

对吧？

2259:35

因为我在服务器端其实是我只是只把我的程序搜索点PPI放上去了，整个环境我还没放上去，比如VIP我还没窗，这里的话就根据你的具体的服务器的操系统，你可能要做特定的一些配置，比如我这个是钨钢头的，所以它用的是APP，你需要提前装好。

9959:57

天

2201:00:06

这几个包，这是5光头或者daddy，你都可以用这几个包，如果你是用别的东西的话，包子名字不太一样，你要自己去查一下。这些我已经装过了。

我这个装过了，如果你没有装你是需要装的，然后你装好之后，这个系统里面就有了Python三和pip三这样两个命令。

方便起见的话，我们通常可以。

9901:00:28

做一个link。

2201:00:31

就是把系统帮你装好的 usrbbi像pip三把它link到usr local bin下面的pip，这样你以后就直接可以用pip这个命令，就不用每次都打pip3，同样Python也是你也可以执行这样的命令。这样运行完之后，你的系统里面就可以直接用Python指向Python3，比如说我现在跑的这个是帮头的19.10，所以它最新的是Python三个7.5，然后pip的也是一样， ok，所以这些工作就准备好就行了，然后现在我们就可以在demo这里面去重新创建我们的微影，不是玩儿门，那方法跟我们在本地的做法是完全一样的，如果你按照我上面的做完了所有的这些配置的话，安装了必须要装的软件的话，你就执行这个就可以了。然后我们现在可以看一下 venv就出现了，然后现在我们同样的是要去激活的方式，跟我们在本地运行的是完全一样的，就是点，然后v因为点然后我顺便说一下，如果你要退出虚拟环境怎么办？你要输一个叫第一activity，你要输这么一个命令就可以了。

好现在我们为了部署的话，我们三需要装三个包叫 pip in store。

101001:01:55

然后VIP然后g Unicom，

2201:02:00

然后基因立刻会用到一个东西叫基event， g里面的是经费用到一个很重要的库，这个库是用来管理我们多个服务进程用的。所以这三个东西是必须要装的。

Ok好，装好之后，我们现在还需要再改一下，我们原来程序改革程序的目的就是为了让这个程序，我们缺省的情况下，其实现在我们已经可以运行叫Python点p这个已经没问题了，这已经是ok的，这个的话如果我们现在访问一下应该是可以的，我们现在实际上已经可以访问到了我那个域名叫做叫star，就是S**PAD x点net，然后我们现在这个呃Python它运行在80 80端口，那么就是8080端口，然后就已经ok了。如果我们在后面加一个参数。

9901:02:57

面部saas。

2201:02:59

少个问号。

9901:03:02

还有没有？

2201:03:04

Ok了，所以其实这样我们就已经可以运行了，只是我们现在运行的方式，直接用Python解释器运行了一一节点一个服务的进程，那就没有我们之前说的架构那么好，所以我们接下来其实是想用机油卡来帮我们运行我们的sole点py其实做到这一步，你已经能够感受到了，你现在其实是在远端服务器上跑的，你把这个网址交给你的任何一个朋友他也可以访问了，这就跟你原来做的单机的软件已经很不一样了，对吧？

Ok现在我们要用金庸内科来做的话，那么我们其实是必须要搜了点PPI里面是要改点东西的，怎么改实际上使用加一行命令，这样命令叫做wsgia就可以了。

你首先用 VIP点APP线去创建你的应用，这是VIP提供的一个类，然后创建你的应用APP，然后你要调用这个APP的wci放来返回一个wci的APP类型的对象，这个对象的名字你可以叫随便什么名字，但是你必须记住，因为接下来你运行的时候你需要这个名字，就这个变量的名字，你接下来在命令行里是要指定的，ok所以你就需要做这么一个事情，做这个事情的话怎么也要把它传到服务器端，因为我们现在只是在本地的开发环境改了对吧？

当然你也可以在本地去装一个机油，你扛测试一下，然后再往服务器去传，现在我们先不管了，我们就直接放上去come in，增加wci的死破，然后把它铺下去。

好剖析到贝塔之后去到 serve端用git poor把最新的版本拉回来，这样搜点票就回来了。

好现在我们就可以用基因unit来运行它。命令是这样子的，命令分几部分，第一个部分是指定你运行在一个什么样的IP和什么样的端口下，我们现在先运行一个0点a0.0.0.0这个IP的意思是我不管什么IP，就是只要访问到这台，机器的任何IP我都可以访问，然后端口指定了一个比如777，然后有一个worker class work class，我们刚才不是说金融卡可以根据需要去创建我的Python的多个运行的实力，我可以把我12点py运行好多次，那么运行我搜点py的容器，它是一个什么样的东西，就机缘这是一个很特殊的运行机制，我们现在也解释不清楚，所以这个就先不管它了，你就理解为它是金融银行运行我的代码的一个容器，或者运行我的代码的一种方式，用这里边的库，然后后面是吉尔尼可要运行的，具体是什么东西，那就指定你的首先冒号的前面是你这个点py文件的名字，叫so点p你可以写server，如果你叫别的名字，比如你叫may点p1你可以写may，然后冒号后面就是你在程序代码里指定的这个WC的这个f名字，你也可以用别的变量，但是你这里用了什么变量，你这个冒号后面就要写什么变量，ok。

好，然后他就告诉你，可能是因use777这个端口已经被占用了，因为我另外这个程序在跑啊没关系，我们换一个。这个就成功了，然后他已经listening at，他在监听来自任何IP的期限端口的访问，现在我们刚才是直接访问的8080端口现在已经失效了，因为我们已经退出了，这里就出错了，但如果我把它改成70 7000这个端口就现在正在跑这个端口。

9901:07:05

他。

2201:07:06

又开始工作了，因为这个时候英俊浩在接管了我们这个东西。

9901:07:10

都没有问题。

Ok。

2201:07:16

这个时候等于就是uni count在充当对外的web server，我们还没有用angels来做对外的web server，我们还没有配恩杰克斯到及Unicom的反向代理。我们现在看到的一共有三种运行，我们程序的方式，第一种方式是直接用Python去运行，我们 Python的解释企业直接对外提供服务。

第二种方式是用基于unit来做对外的服务，它会去运行我们的搜了点py第一个方法它可以用，但是并发很差，有了基u临床之后并发就会好起来，因为它会根据需要启动更多的Python解释器，而且它会自动的解启动那些crush掉的出了问题的那些Python解释器，所以机关内考而且机构的性能也比我们直接运行会更好一些。

这就有这些好处，但是还有另外的比如说ht TS，比如说静态文件，这些我们还需要以这样恩景斯来做，所以下面我们先把停掉，我们来配置nx，这个就比较麻烦，我就不详细讲了，这给大家看一下，它的逻辑是这样的，我们来看一下。

好，就ngs的这个配置文件它可以配置就是一个ng服务器，一个edg的web搜下面可以配置多个不同的网，每个网站绑定到特定的域名，这个配置其实不是我现在的这个给大家演示的配置是我另外前几天测试的时候的一个配置，它的逻辑是这样的，首先它listen它监听的是80，是缺省的APP的端口，就只要是HP的访问，不写端口号就是80，然后他只负责处理来自这个域名的访问，就是我用其他的域名或者用IP地址访问到这台电脑的话，访问到这台服务器的话，其实不归这个server管，这种配置就是恩吉斯上面一个n个服务器可以管好多个域名，就是我可以同一台服务器装一个nx的server，然后针对不同的域名的访问，这域名都指向这一个IP，指向同一个IP指向同一台机器，但是我给他提供的服务站点是不同的，这个就是它的多域名的这个能力，ok如果是用这个域名来访问的话，那我就把它px反向代理到。

111101:09:17

这台。

2201:09:18

机器上的7777端口，然后接下来我只要在这台机器上跑一个unit去监听新信息端口就可以了，这样我就建立了恩金斯跟unit之间的一个连接，就是我恩吉斯负责所有的外部的访问，进来之后，只要进来的是demo点这个的域名的话，我就把这些请求转发给本机的清晰端口，街道上是啥？

安吉斯是不管的，这个端口上是啥，正好我们跑的是一个基于内孔就可以了。

同时我还可以定一个比如叫static一个静态的静态的目录指向的就是本机的一个目录指向，就是服务器上本机的一个目录，那意味着如果在这个域名下去访问static这个路径的话，他就直接返回本机的文件目录，下面的那些文件就行了，而这个访问是不通过这套逻辑不会走反向代理的，也就是我把静态文件直接交给nx去访问，除此以外的东西就交给反向代理机器端口的上面的反向代理的程序去处理，这就是用恩京斯来配置的ok。

所。

9901:10:29

以如果你访。

2201:10:32

问这个demo点parallel，点net的话，他就会访问到我以前写好的一个测试的这个程序里面，实际上是通过精力狂我们在监听的一个清晰端口所给出的服务。

好，那么关于如何在远端去部署，大概是这样一个情况。

9901:10:56

大家反正真正的时候我们都可以。

2201:11:05

大家就记得这个图的结构就行了，所有的外部访问首先经过一个web搜 web store把信息PPT所有这些协议的基本处理就处理掉了，然后它可以通过一个反向代理去请求一个另外的服务器，这个服务器很可能还在同一台电脑上，也可以在不同的，电脑上没问题，如果你性能上遇到问题了，你甚至可以通过两台电脑来跑反向代理，然后用反向代理的 wsgi的server来管理我们的所有点p完，它可以按需的去启动，所以基本的逻辑就是这样子。

好，那么在下一节当中，我们会继续为大家介绍怎么把我们的小的web应用更加丰富起来，我们会简单的介绍一下关于css就样式表，因为我们现在写出来的片子很难看，我们可以把它更加漂亮一点，而且以后你如果正儿八经的做一些 web开发的话，会有专门的设计师来帮你设计这个页面怎么做得好，然后他们做的事情就集中体现在样式表里，就是你负责内容他负责样式，你负责内涵他负责，好看就大概这样子，然后下一个部分也会介绍一下，就是如何通过web form来处理用户的输入。

9901:12:07

好好。

2201:12:09

我们继续现在我们回到本地开发，我们刚才已经尝试了完整的在服务端去部署，以及在服务端访问我们的网页的这一套逻辑已经没有问题了。

我没必要没事就往服务器端部署，我们只要需要的时候我们可以修改代码，在本地测试完毕，我们在本地把它commit，然后push到get up上，然后再去服务端把它铺下来，然后运行机油逆口，如果你愿意运行了，你可能要首先启动一下，这就是一个完整的开发测试部署的流程，但是我们现在就先回到本地，我们继续来开发我们小的软件，首先我们来介绍一下css就是样式表，这是做web开发绕不开的一个东西web开发就三样东西hml，4SS和加斯亏，我们都会涉及到一点大家有一个感受。

首先我把我们这个x点html这个模板已经做了一些标准，化实际上就是把它补充成了一个完整的标准html的这样的一个模板。因为它是一个VIP的模板，所以它最开始必须还是有这个东西 VIP规定，模板的变量的定义必须在模板的第一行，否则它会出问题的，所以这个比赛第一行，然后下面就是标准的html了。

Hr里面html的顶级标签，然后下面有had和法顶，然后had里面有一些麦塔，就是这个页面的一些麦塔贝塔一些原数据，比如说它的奥瑟它的字符级编码，这个东西，然后有个title，这个title是显示在这个地方的，显示在浏览器的标题栏的这个地方了，我没有title的时候，他就直接给我显示成URL了，这是chrome的做法，所以我可以指定一个title叫vivo，然后下面最重要的是我。

引入了一个样式表，样式表。呢比、样式表，它引入用的是一个叫link的tag，然后它有几个参数，第一个参数是rel指定它是style shit，然后 r一 rrhref就指定它的地址就应该是到什么地方，它在跟目录的static的CS下面叫0点CS，那1点CS内容你是可以直接写在CM没问题的，那你放在另外一个文件里面就更容易去分开管理。

等下我们会去看 main点CS里面可以放点什么，然后下面有芭比，芭蒂里面具体内容这个内容跟我们上一个版本几乎没区别，这些是完全一样的。

然后下面我加了一个链接，是为了演示有更多的一些样式，就这个变化没有任何其他的变化，这个时候我们刷新一下可以看到就变了，我们先去掉无所谓的，就这样，然后加了一句话，这句话里有一个超链接，但是这个title已经发挥作用了，不再是 URL，是我们指定的title，ok，然后现在我们就可以在下面我们创建一个。

9901:14:50

叫 static在歌。

2201:14:58

目录下创建了一个叫斯莱迪的目录，它里面专门放我们的静态文件，然后在c下面我们再创立叫CS的目录，然后在CS这个目录下，我们再创建一个叫main点css，然后打开它就是一个样式表，我们说web开发就三大店， html4SS和加斯，他们的分工非常的清晰明确，是最好不要混的，html就负责内容，数据和内容都在html里面，然后标签代表来切列表里面的不同的语义，CS代表，tml里面的东西应该如何呈现如何展现，做的好的网站，它会根据这个html所呈现的地方不一样，所使用的设备不一样，它css是会动态的变化的，比如你在桌面上很宽的屏幕下，它会显示一个样子，在手机上比较窄的屏幕，它的CS会自动适配成比较窄的，甚至还可以适配到比如说手表那么小的很特殊的屏幕上，等等， CS是决定了怎么展示数据，就是那个数据展示的方式可以完全不一样，包括排版都可以不一样，本来是三栏的可以合并成一栏，这些通通都是可以用CS来控制的，所以CS决定了怎么展现，理论上数据和展现是最好分离，分的越开越好，数据不要管怎么展现，展现不要管具体是什么数据，所以这是两个很重要的组件，然后加student可以用来操纵hm，它可以动态的改变html内容，调整它的结构，增删改都没问题，所以这三个配合起来，html加CS加加是把浏览器变成了一个完整的操作系统，我们可以在操作系统里做的事情绝大部分可以用这三大件完成，只有很少的限制，所以现在web的应用可以做得非常的漂亮，典型的像什么Gmail这种那都盘了，它跟一个复杂的应用程序一样了。

好，我们现在这个模板这边已经做好准备了，我们现在就看 main点CS，我们可以看点啥？ Cs的做法我们现在先调整一下。这样这边是 CS s这边是html，我们可以对应的来看，首先 CC可以指定html里面的某一类型的tag，某一类tag，所有的这一类PAD都变成特定的样式。都变成特定的样式，怎么做？

比如说我可以指定 body， tag。下面的样式怎么指定，比如说我把party下面的方fami**这个字体全部都改成CS，我们现在这个字体是缺省的 CF字体，就是这种带倒角的这种字体，CS是那种比较圆滑的字体，我们保存一下，然后这边刷新你就会发现字体就发生了改变，由那种带倒角的变成这种圆滑的字体了，body标签下面所有的包含这些子标签统统都会根据去变化，这是改了保底的东西。

再比如说我们可以改 a a hyper link就是套链接，我们可以a改成什么样？改成 Color blue。

4401:18:01

就是。

2201:18:05

链接改成蓝色的，然后

111101:18:08

 tax decorate。

4401:18:09

 declaration none就是。

2201:18:14

超链接缺损的情况下，先把夏天去掉，就是tax decoration那，这些东西到底应该是啥？为什么是这个名字？这是css的内容，一一大厚本书里边全是这些东西，你要想学会css，就要把常用的这东西全搞熟，现在我问好。

4401:18:29

我们先。

2201:18:29

看到超链接就变成蓝色的了，而且没有下划线。

然后我们还可以指定一些就是特殊的标签状态，比如a这个标签有一个好玩的状态，就是当鼠标移动到上面的时候，它的样式 a标签本身是个样式，当鼠标一样上去的时候是a冒号over这样的一个样式，我们比如说可以把它改成。

 takes decoration and。

111101:18:53

 like。

2201:18:54

就是给他加上划线，然后color。随便来了这些color，你实际做软件的时候，这些卡乐其实会有专门的设计师来帮你调的比较好看，我不是设计师啊，所以我就随便挑了一些标准的颜色。

好现在回刷新一下，现在还是蓝色，没有下划线鼠标移上去变成绿色带下划线。

111101:19:14

的稍微。

2201:19:15

大一点可能清楚一些，我们加了三个css的这叫css的规则， style rule就是这些规则就决定了这边的不同的这些tag会怎么去展现，现在完全啥也没动，这个cml是一点都没有改变的，只动了style，它的样式完全发生变化，这就是数据内容跟，样式完全可以分离开，你可以写好几个不同的css，在不同的地方适应不同的css，就像换皮一样，就同样这个内容同样这个页面可以展示成完全不一样的样子。

好，这是这三个的套路，这三个规则都是指定某一类的看它的，样式是什么，还有一种办法就是我可以指定一些特殊的叫做style class就是样式类，比如说我可以指定一个样式类叫做key word关键字。前面指定这些text就直接写tag的，名字，然后后面大括号就你在里面写样式就完了，指定样式类的时候前面要加个点，这个点代表这后面是一个样式的类，然后这里面比如说我们可以写一下fun weight，包括加粗，然后color。

4401:20:22

 red。

9901:20:22

也。

2201:20:24

就是说我定义了个样式类，就这个类的特征就是红色粗细，我这个类应用在什么地方，我可以在html里面去写的，比如说我可以把这个name，如果这个name它是有的话，没有的话就显示word就普通的word，如果他有的话我想给他强调一下，把它作为关键字怎么办，我在这里写一个spa，spat就是把一块东西拿出来单独处理的意思， Spain，然后class等于 vs扣的做得很好，你样式里有的卡斯内马上就出来了，你就可以直接选中它。

4401:20:56

然后 god span。

2201:21:00

Ok这个意思就是说我指定如果这个name不是空的，我就给它一个class的样式的内叫p word，因为它是个关键字是需要醒目的，就这个醒目东西到底改成啥样，是由 style式来定义的，就你可以改，但是在语义上这个name是一个p word，所以还是遵循我们说的规则，就是现在我们要负责数据、内容、语义，而在样式稿这边负责展现成啥样，我们现在可以看一下。

没有name的情况下word是普通的，如果我们给他一个name的话。

4401:21:32

我们看到。

2201:21:34

这个name就是显示为红色粗体，因为它是个pure这。是所谓样食类。

不仅可以通过样式类来做，我们具体的某一些特定的部分给它特定样式， css还可以用来做所谓的layout，就是布局。

一个复杂的页面绝对不是像我们这样从上到下像一篇文章一样，它可能有多蓝的布局，分成网状的布局，2×2的结构的块都有可能，这些布局怎么做，其实都是用css来做的。

在古代在十几二十年以前，现在要布局是用table是用表格来做的，用一张你看不见的表格来做布局，那个真是非常痛苦，但现在有了CS其实做得非常优雅，非常的容易，怎么做呢？ Cs用来做布局的东西叫div。

111101:22:20

 div

2201:22:23

比如说我现在定一个大的 DNA然后给他一个class叫做container，然后我们把所有的内容都放进去，把所有人都放进去。

好，那么container我们它是一个什么样的布局，我们给大家写一下 container。其实。你发现这个地方其实左边紧紧的顶着很难看的对吧？一般都不会这样子，我可以规定 container它是一个4周都有一些这个空间的，怎么写很简单就是一句就margin。

111101:23:01

你可以。

2201:23:02

分开指定margin Top left bottom right这都有，如果你指定margin的话就是44年都一样。

4401:23:08

我们用。

2201:23:09

一个简单的格式ok，好，现在他下作都有这个空间了。

9901:23:15

这是。

2201:23:16

用来做布局的，还可以做嵌套的布局，如果我们在 develop tours里面我们来看一下的话，如果我们选巴蒂的话就会发现这个body代表了，所有的内容最外面的框，然后body是自带一个小的边框的这个外围的这个橙色就是它小边框，然后div就是我们刚才做这个容器，这个容器是中间下面所有的内容的部分都包裹在里面，就蓝色的部分，然后它是自带一个两em的大小的一个边框，就是它的 margin。

然后下面是HH点h1，然后 OEM的部分QS的部分，然后比如说如果你选中这个spent Kayo的话，你会发现在右边会显示出它的样式，你可以在 directors里面去临时的激活或者是修改一些样式，比如你可以把这个去掉，它就显示不是b的了，你可以把激活，所以develop托尔斯实际上允许你动态的在不改源代码情况下动态的去调整这些这些样式，你给自己调一调调到你觉得这个已经非常漂亮了，然后再把这里面的这些设置的值抄回到css里面所以迪奥特尔斯很好用的，它可以直接去改这些内容，包括这些样式，有的复杂的样式表，它会对同一个tag有多重不同的规则，那么这里就会显示出它好多规则的叠加，你可以在这边去调试。

121201:24:27

好。

2201:24:29

那么关于ccs我们非常粗略的简单的一个说明就是这样子就是内容和语义跟显示样式完全分离，然后显示 style的时候，它是可以这个定义某些特定的tag显示为啥样子，然后某些特定的类别，某些特定的类别定义好，然后在icm里面可以指定某些元素，它给它一个style的plus，这就是css的用法。

好，下面我们来看一下我们刚才提过的，我们从客户端往这个服务端去传递输入的数据，我们刚才讲了用URL来传这些参数的办法，更常用的办法其实是用户在页面上借助一些具体的输入框，它可以进入这些输入框来做输入的工作，那么输入框实际上是hdi没有页面上的一些特殊的tag，这些tag一般都是以input就是input态，然后input下面有很多不同的参数，你可以自己去写，我们后面也会演示如何自己写，但是 Vip它提供了一些能力，你可以直接在Python里面去构建这样的form。要做到这一点的话是要这么去做，首先你要provide import form，这样就引用它。然后我们想做一个非常简单的就是用户输入一个算式，然后你算出结果来，老方一贴，我们用我们以前曾经熟悉的 Simple evaluation，我们需要。

9901:26:02

先。

2201:26:07

先激活，然后为PP store simple in valuation。

很快找好了。

9901:26:16

我们这里就

2201:26:30

这个维斯扣的，他有的时候就是会不认得你刚装的一个这个东西如果你把它关了，然后你再重新。他就会刷新他的语言分析的那个部分就能够认识了。

9901:26:45

好。

2201:26:46

这个ok了，我们可以定义一下我们的former，我们叫CAC queue later。